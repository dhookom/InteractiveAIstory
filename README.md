# Interactive AI Storytelling

A browser-based storytelling game where you pick a theme and a character, then drive the story by typing actions. The narrative is generated by **Google Gemini** via the [Gemini API](https://ai.google.dev/gemini-api/docs).

## What it does

1. **Choose a theme** – Fantasy, Science Fiction, Mystery, Adventure, or your own.
2. **Get a character** – The AI suggests a name and personality; you can keep or edit them.
3. **Start the story** – A short tranquil scene is generated, then a disruption.
4. **Play** – Type actions (e.g. "investigate the noise"); the AI continues the story. Repeat as long as you like.

## Quick start

### 1. Clone and enter the project

```bash
git clone https://github.com/dhookom/InteractiveAIstory.git
cd InteractiveAIstory
```

### 2. Create a virtual environment and install dependencies

```bash
python3 -m venv venv
source venv/bin/activate   # Windows: venv\Scripts\activate
pip install -r requirements.txt
```

### 3. Set your Gemini API key

Get a free API key from [Google AI Studio](https://aistudio.google.com/app/apikey).

```bash
cp .env.example .env
# Edit .env and set:
# GEMINI_API_KEY=your_key_here
```

### 4. Run the app

```bash
python app.py
```

Then open **http://127.0.0.1:5000** in your browser.

## Project layout

| File | Purpose |
|------|--------|
| `app.py` | Flask backend: serves the page and three API endpoints that call Gemini. |
| `templates/index.html` | Single-page UI: theme, character, story text, action input. |
| `requirements.txt` | Python dependencies (Flask, google-genai, python-dotenv). |
| `.env.example` | Example env file; copy to `.env` and add `GEMINI_API_KEY`. |
| `PLAN.md` | Design and implementation plan for the game. |

## API (for developers)

- `POST /api/suggest-character` – Body: `{ "theme": "fantasy" }`. Returns `{ "name", "personality" }`.
- `POST /api/start-story` – Body: `{ "theme", "characterName", "characterPersonality" }`. Returns `{ "opening" }`.
- `POST /api/continue-story` – Body: `{ "theme", "characterName", "characterPersonality", "storySoFar", "userAction" }`. Returns `{ "segment" }`.

## Rate limits and errors

The app uses **gemini-2.5-flash** (configurable in `app.py`). Free-tier quotas apply; see [Gemini API rate limits](https://ai.google.dev/gemini-api/docs/rate-limits). On 429 (quota exceeded), the app waits ~45 seconds and retries once. If you see "Story engine is busy; try again.", run with `debug=True` to see the full error (and optional `detail` in the API response).

## License

Use and modify as you like. No warranty.
